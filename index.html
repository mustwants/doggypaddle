<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta
    http-equiv="Permissions-Policy"
    content="payment=(self &quot;https://js.stripe.com&quot; &quot;https://buy.stripe.com&quot;)"
  />
  <title>PupSwim - Private Dog Pool Sessions in St. Augustine, FL</title>
  <meta name="description" content="Book private 20-minute swim sessions for your dog at PupSwim in St. Augustine, FL. $25 per session or $100 for 5 sessions. Gift cards available." />
  <meta name="author" content="Jointwerx LLC" />
  <meta name="keywords" content="dog swimming, dog pool, puppy, pup, treats, toys, St. Augustine pet services, dog exercise, private dog swim" />
  <link rel="canonical" href="https://doggypaddle.com/" />

  <!-- Open Graph / Social Media -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="PupSwim - Private Dog Pool Sessions" />
  <meta property="og:description" content="Safe, private swimming sessions for dogs in St. Augustine. Book now!" />
  <meta property="og:image" content="/assets/logo.png" />
  <meta property="og:url" content="https://PupSwim.com/" />
  <meta property="og:url" content="https://dogpaddle.club/" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="PupSwim - Private Dog Pool Sessions" />
  <meta name="twitter:description" content="Safe, private swimming sessions for dogs in St. Augustine. Book now!" />

  <!-- Favicon -->
  <link rel="icon" href="/assets/logo.png" type="image/png" />
  
  <!-- Preconnect for performance -->
  <link rel="preconnect" href="https://js.stripe.com" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
    <script src="/scripts/error-guard.js"></script>
  <style>
    /* CSS Reset & Base */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --primary: #028090;
      --primary-dark: #05668d;
      --secondary: #114B5F;
      --accent: #F0A202;
      --bg-light: #f9fbfd;
      --white: #ffffff;
      --text: #222;
      --text-light: #666;
      --border: #e0e0e0;
      --shadow: rgba(0, 0, 0, 0.1);
      --radius: 12px;
      --transition: all 0.3s ease;
    }

    html {
      scroll-behavior: smooth;
      font-size: 16px;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: var(--text);
      background: var(--bg-light);
      overflow-x: hidden;
    }

    /* Navigation */
    nav {
      background: var(--white);
      box-shadow: 0 2px 8px var(--shadow);
      position: sticky;
      top: 0;
      z-index: 1000;
      padding: 1rem 0;
    }

    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .logo-img {
      height: 40px;
      width: auto;
    }

    .nav-links {
      display: flex;
      gap: 1.5rem;
      list-style: none;
      align-items: center;
      flex-wrap: wrap;
    }

    .nav-links a {
      color: var(--text);
      text-decoration: none;
      font-weight: 500;
      transition: var(--transition);
      padding: 0.5rem 0;
    }

    .nav-links a:hover {
      color: var(--primary);
    }

    .nav-links .btn-waiver {
      background: var(--accent);
      color: var(--white);
      padding: 0.5rem 1rem;
      border-radius: 6px;
      transition: var(--transition);
    }

    .nav-links .btn-waiver:hover {
      background: #d88d00;
      transform: translateY(-2px);
    }

    .nav-cart-button {
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
      background: var(--primary);
      color: var(--white);
      border: none;
      border-radius: 999px;
      padding: 0.55rem 1rem;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 2px 8px var(--shadow);
      transition: var(--transition);
    }

    .nav-cart-button:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
    }

    .nav-cart-button:focus {
      outline: 3px solid var(--accent);
      outline-offset: 2px;
    }

    .nav-cart-amount {
      background: rgba(255, 255, 255, 0.15);
      padding: 0.15rem 0.55rem;
      border-radius: 999px;
      font-variant-numeric: tabular-nums;
    }

    .nav-cart-count {
      display: none;
      align-items: center;
      justify-content: center;
      min-width: 22px;
      height: 22px;
      background: var(--accent);
      color: var(--white);
      border-radius: 999px;
      font-size: 0.85rem;
      font-weight: 700;
    }
    
    /* Container */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1.75rem 1.25rem;
    }

    /* Hero Section */
    .hero {
      background: linear-gradient(135deg, rgba(2, 128, 144, 0.95) 0%, rgba(17, 75, 95, 0.95) 100%), 
                  url('/assets/Remi1.jpg') center/cover no-repeat;
      color: var(--white);
      padding: 4rem 1.5rem;
      text-align: center;
      margin-bottom: 0;
      position: relative;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(2, 128, 144, 0.85) 0%, rgba(17, 75, 95, 0.85) 100%);
      z-index: 0;
    }

    .hero-content {
      position: relative;
      z-index: 1;
    }

    .hero h1 {
      font-size: clamp(2rem, 5vw, 3rem);
      margin-bottom: 0.75rem;
      font-weight: 700;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .hero p {
      font-size: clamp(1rem, 2.5vw, 1.25rem);
      max-width: 600px;
      margin: 0 auto 1.5rem;
      opacity: 0.98;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
    }

    .hero-actions {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 0.75rem;
    }

    .hero-cta {
      display: inline-block;
      background: var(--accent);
      color: var(--white);
      padding: 0.9rem 1.75rem;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.05rem;
      transition: var(--transition);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .hero-cta:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    /* Gallery Section */
    .gallery-section {
      background: var(--white);
      padding: 2.25rem 0;
      margin-bottom: 1.75rem;
    }

    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
    }

    .gallery-grid img {
      width: 100%;
      height: 300px;
      object-fit: cover;
      border-radius: var(--radius);
      box-shadow: 0 4px 12px var(--shadow);
      transition: var(--transition);
    }

    .gallery-grid img:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
    }

    @media (max-width: 768px) {
      .gallery-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
      }

      .gallery-grid img {
        height: 200px;
      }
    }

    @media (max-width: 480px) {
      .gallery-grid {
        grid-template-columns: 1fr;
      }

      .gallery-grid img {
        height: 250px;
      }
    }

  /* Pricing Cards */
    .pricing-section {
      margin-bottom: 2.25rem;
    }

    .pricing-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1.25rem;
      margin-top: 1.5rem;
    }

    .price-card {
      background: var(--white);
      padding: 1.5rem;
      border-radius: var(--radius);
      box-shadow: 0 4px 16px var(--shadow);
      text-align: center;
      transition: var(--transition);
      border: 2px solid transparent;
    }

    .price-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
      border-color: var(--primary);
    }

    .price-card.featured {
      border-color: var(--accent);
      position: relative;
    }

    .price-card.featured::before {
      content: "BEST VALUE";
      position: absolute;
      top: -12px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--accent);
      color: var(--white);
      padding: 0.25rem 1rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 700;
    }

    .price-card h3 {
      color: var(--secondary);
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }

    .price {
      font-size: 3rem;
      font-weight: 700;
      color: var(--primary);
      margin: 1rem 0;
    }

    .price-card ul {
      list-style: none;
      margin: 1.5rem 0;
      text-align: left;
    }

    .price-card li {
      padding: 0.5rem 0;
      padding-left: 1.5rem;
      position: relative;
    }

    .price-card li::before {
      content: "‚úì";
      position: absolute;
      left: 0;
      color: var(--primary);
      font-weight: 700;
    }

    /* Section Styles */
    section {
      background: var(--white);
      padding: 2rem;
      border-radius: var(--radius);
      margin-bottom: 1.75rem;
      box-shadow: 0 2px 12px var(--shadow);
    }

    h2 {
      color: var(--secondary);
      font-size: clamp(1.75rem, 4vw, 2.25rem);
      margin-bottom: 0.75rem;
      font-weight: 700;
    }

    h3 {
      color: var(--text);
      font-size: 1.25rem;
      margin-bottom: 1rem;
      font-weight: 600;
    }

    /* Form Styles */
    .form-grid {
      display: grid;
      gap: 1.25rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    label {
      font-weight: 500;
      margin-bottom: 0.5rem;
      color: var(--text);
    }

    input, select, textarea {
      width: 100%;
      padding: 0.875rem;
      border: 2px solid var(--border);
      border-radius: 8px;
      font-size: 1rem;
      transition: var(--transition);
      font-family: inherit;
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(2, 128, 144, 0.1);
    }

    .checkbox-group {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      margin: 1rem 0;
    }

    .checkbox-group input[type="checkbox"] {
      width: auto;
      margin-top: 0.25rem;
      cursor: pointer;
    }

    .checkbox-group label {
      margin: 0;
      cursor: pointer;
      flex: 1;
    }

    /* Buttons */
    button, .button {
      background: var(--primary);
      color: var(--white);
      border: none;
      padding: 1rem 2rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: inline-block;
      text-decoration: none;
      text-align: center;
      width: 100%;
    }

    button:hover, .button:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(2, 128, 144, 0.3);
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .button-secondary {
      background: var(--accent);
    }

    .button-secondary:hover {
      background: #d88d00;
    }

    /* Calendar */
    .calendar-container {
      overflow-x: auto;
      margin-top: 1.5rem;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      min-width: 500px;
    }

    thead {
      background: var(--primary);
      color: var(--white);
    }

    th {
      padding: 1rem;
      font-weight: 600;
      text-align: center;
    }

    td {
      padding: 1rem;
      border: 1px solid var(--border);
      text-align: center;
      vertical-align: top;
    }

    td strong {
      display: block;
      font-size: 1.25rem;
      margin-bottom: 0.5rem;
      color: var(--secondary);
    }

    td small {
      color: var(--text-light);
      font-size: 0.85rem;
    }

  /* Alert/Info Boxes */
    .info-box {
      background: #e8f4f8;
      border-left: 4px solid var(--primary);
      padding: 1.25rem;
      border-radius: 8px;
      margin: 1.25rem 0;
    }

    .info-box p {
      margin: 0;
    }

     .warning-box {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      color: #5c3b07;
      padding: 1rem;
      border-radius: 8px;
      margin-top: 2rem;
    }

    .warning-box strong {
      color: inherit;
    }
    
    /* Footer */
    footer {
      background: var(--secondary);
      color: var(--white);
      text-align: center;
      padding: 1.5rem 1.25rem;
      margin-top: 2.5rem;
    }

    footer p {
      margin: 0.5rem 0;
      opacity: 0.9;
    }

    footer a {
      color: var(--accent);
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }
  .footer-actions {
      margin-top: 1rem;
      display: flex;
      justify-content: center;
    }

    .footer-admin-button {
      display: inline-block;
      background: var(--accent);
      color: var(--white);
      padding: 0.85rem 1.5rem;
      border-radius: 8px;
      font-weight: 700;
      text-decoration: none;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      transition: var(--transition);
    }

    .footer-admin-button:hover {
      background: #d88d00;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
    }

    /* Responsive Design */
    @media (min-width: 768px) {
      .form-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .form-group.full-width {
        grid-column: 1 / -1;
      }
    }

    @media (max-width: 768px) {
      .nav-container {
        flex-direction: column;
        text-align: center;
      }

      .nav-links {
        justify-content: center;
      }

      section {
        padding: 1.5rem;
      }

      .hero {
        padding: 3rem 1.5rem;
      }

      .pricing-grid {
        grid-template-columns: 1fr;
      }

      button, .button {
        padding: 0.875rem 1.5rem;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 1rem;
      }

      section {
        padding: 1.25rem;
      }

      .price {
        font-size: 2.5rem;
      }

      input, select, textarea {
        padding: 0.75rem;
      }
    }

    /* Loading State */
    .loading {
      opacity: 0.6;
      pointer-events: none;
    }

    /* Accessibility */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* Focus styles for accessibility */
    a:focus, button:focus, input:focus, select:focus, textarea:focus {
      outline: 3px solid var(--accent);
      outline-offset: 2px;
    }
  </style>
</head>

<body>
  <!-- Navigation -->
  <nav>
    <div class="nav-container">
      <a href="/" class="logo">
        <img src="/assets/logo.png" alt="DoggyPaddle Logo" class="logo-img" />
        <span>DoggyPaddle</span>
      </a>
      <ul class="nav-links">
        <li><a href="#pricing">Book Session</a></li>
        <li><a href="/store">Store</a></li>
        <li><a href="/photos">Share Photos</a></li>
               <li>
          <button id="header-cart-button" class="nav-cart-button" type="button">
            <span aria-hidden="true">üõí</span>
            <span class="nav-cart-label">Cart</span>
            <span id="header-cart-amount" class="nav-cart-amount">$0.00</span>
            <span id="header-cart-count" class="nav-cart-count" aria-label="Items in cart">0</span>
          </button>
        </li>
        <li><a href="/waiver/waiver.html" class="btn-waiver">Waiver</a></li>
      </ul>
    </div>
  </nav>

 <!-- Hero Section -->
  <div class="hero">
    <div class="hero-content">
      <h1>Private Dog Pool Sessions in St. Augustine</h1>
      <p>Swimming for up to 2 dogs. Responsible owner supervision required. 20-minute sessions with flexible scheduling.</p>
      <div class="hero-actions">
        <a href="#booking" class="hero-cta">Book Your Session Today</a>
        <a href="https://dogpaddle.club/store" class="hero-cta">Buy Treats and Toys</a>
      </div>
    </div>
  </div>

  <!-- Featured Photos Carousel -->
  <div class="gallery-section">
    <div class="container">
      <h2 style="text-align: center; color: var(--secondary); margin-bottom: 1.5rem;">Featured Photos</h2>
      <div class="carousel-container">
        <button class="carousel-btn prev" id="carousel-prev" aria-label="Previous photo">‚Äπ</button>
        <div class="carousel-wrapper">
          <div class="carousel-track" id="carousel-track">
            <!-- Carousel items will be loaded dynamically -->
          </div>
        </div>
        <button class="carousel-btn next" id="carousel-next" aria-label="Next photo">‚Ä∫</button>
      </div>
      <div class="carousel-dots" id="carousel-dots"></div>
    </div>
  </div>

  <style>
    .carousel-container {
      position: relative;
      max-width: 800px;
      margin: 0 auto;
      overflow: hidden;
    }

    .carousel-wrapper {
      overflow: hidden;
      border-radius: 12px;
    }

    .carousel-track {
      display: flex;
      transition: transform 0.5s ease;
    }

    .carousel-item {
      min-width: 100%;
      position: relative;
    }

    .carousel-item img {
      width: 100%;
      height: 500px;
      object-fit: cover;
      display: block;
    }

    .carousel-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%);
      color: white;
      padding: 2rem 1.5rem 1.5rem;
    }

    .carousel-caption h3 {
      margin: 0 0 0.5rem 0;
      font-size: 1.5rem;
    }

    .carousel-caption p {
      margin: 0;
      font-size: 1rem;
      opacity: 0.9;
    }

    .carousel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.9);
      border: none;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      font-size: 2rem;
      cursor: pointer;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      color: var(--primary);
    }

    .carousel-btn:hover {
      background: white;
      transform: translateY(-50%) scale(1.1);
    }

    .carousel-btn.prev {
      left: 1rem;
    }

    .carousel-btn.next {
      right: 1rem;
    }

    .carousel-dots {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      margin-top: 1.5rem;
    }

    .carousel-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .carousel-dot.active {
      background: white;
      width: 32px;
      border-radius: 6px;
    }

    @media (max-width: 768px) {
      .carousel-item img {
        height: 300px;
      }

      .carousel-btn {
        width: 40px;
        height: 40px;
        font-size: 1.5rem;
      }

      .carousel-caption h3 {
        font-size: 1.2rem;
      }

      .carousel-caption p {
        font-size: 0.9rem;
      }
    }
  </style>

  <script>
    // Carousel functionality
    let currentSlide = 0;
    let carouselPhotos = [];

    async function loadFeaturedPhotos() {
      const API_ENDPOINT = window.DoggyPaddleConfig?.API_ENDPOINT;
      const isBackendConfigured = API_ENDPOINT && !API_ENDPOINT.includes('YOUR_DEPLOYED_WEBAPP_ID');

      try {
        if (isBackendConfigured) {
          const response = await fetch(`${API_ENDPOINT}?action=getPhotos&admin=false`);
          if (!response.ok) {
            throw new Error(`Photos request failed with status ${response.status}`);
          }

          const result = await response.json();
          if (result.status === 'success' && Array.isArray(result.photos)) {
            localStorage.setItem('doggypaddle_photos', JSON.stringify(result.photos));
          }
        }
      } catch (error) {
        console.warn('Falling back to cached photos:', error);
      }
      const photos = JSON.parse(localStorage.getItem('doggypaddle_photos') || '[]');
      const approvedPhotos = photos.filter(photo => photo.status === 'approved');
      const featuredPhotos = approvedPhotos.filter(photo => photo.featured);

      // Prefer featured photos when marked, otherwise show all approved submissions
      carouselPhotos = featuredPhotos.length > 0 ? featuredPhotos : approvedPhotos;
      
      // Fallback to placeholder images if no featured photos
      if (carouselPhotos.length === 0) {
        carouselPhotos = [
          {
            imageUrl: '/assets/Remi1.jpg',
            dogName: 'Remi',
            caption: 'Loves to fetch after a good dive',
            customerName: 'Sarah',
            featured: true,
            status: 'approved'
          },
          {
            imageUrl: '/assets/Remi2.jpg',
            dogName: 'Remi',
            caption: 'Remi ball session',
            customerName: 'Sarah',
            featured: true,
            status: 'approved'
          },
          {
            imageUrl: '/assets/Remi3.jpg',
            dogName: 'Remi',
            caption: 'Remi belly flop',
            customerName: 'Sarah',
            featured: true,
            status: 'approved'
          },
          {
            imageUrl: '/assets/Remi4.jpg',
            dogName: 'Remi',
            caption: 'Remi Dive',
            customerName: 'Sarah',
            featured: true,
            status: 'approved'
          }
        ];
      }

      renderCarousel();
    }

    function renderCarousel() {
      const track = document.getElementById('carousel-track');
      const dotsContainer = document.getElementById('carousel-dots');

      if (carouselPhotos.length === 0) {
        track.innerHTML = '<p style="color: white; text-align: center; padding: 3rem;">No featured photos yet. Check back soon!</p>';
        return;
      }

      // Render carousel items
      track.innerHTML = carouselPhotos.map(photo => `
        <div class="carousel-item">
          <img src="${photo.imageUrl}"
               alt="${photo.dogName} - ${photo.caption || ''}"
               onerror="this.src='/assets/logo.png'" />
          <div class="carousel-caption">
            <h3>${photo.dogName}</h3>
            <p>${photo.caption || ''}</p>
            ${photo.customerName ? `<p style="font-size: 0.9rem; margin-top: 0.5rem;">üì∏ by ${photo.customerName}</p>` : ''}
          </div>
        </div>
      `).join('');

      // Render dots
      dotsContainer.innerHTML = carouselPhotos.map((_, index) => `
        <button class="carousel-dot ${index === 0 ? 'active' : ''}"
                onclick="goToSlide(${index})"
                aria-label="Go to slide ${index + 1}"></button>
      `).join('');

      // Show/hide navigation buttons based on number of photos
      const prevBtn = document.getElementById('carousel-prev');
      const nextBtn = document.getElementById('carousel-next');
      if (carouselPhotos.length <= 1) {
        prevBtn.style.display = 'none';
        nextBtn.style.display = 'none';
      } else {
        prevBtn.style.display = 'flex';
        nextBtn.style.display = 'flex';
      }
    }

    function goToSlide(index) {
      const track = document.getElementById('carousel-track');
      const dots = document.querySelectorAll('.carousel-dot');

      currentSlide = index;
      track.style.transform = `translateX(-${currentSlide * 100}%)`;

      // Update active dot
      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === currentSlide);
      });
    }

    function nextSlide() {
      currentSlide = (currentSlide + 1) % carouselPhotos.length;
      goToSlide(currentSlide);
    }

    function prevSlide() {
      currentSlide = (currentSlide - 1 + carouselPhotos.length) % carouselPhotos.length;
      goToSlide(currentSlide);
    }

    // Auto-advance carousel every 5 seconds
    let autoAdvance;
    function startAutoAdvance() {
      autoAdvance = setInterval(nextSlide, 5000);
    }

    function stopAutoAdvance() {
      clearInterval(autoAdvance);
    }

    // Initialize carousel
    document.addEventListener('DOMContentLoaded', () => {
      loadFeaturedPhotos();

      // Set up navigation
      document.getElementById('carousel-prev').addEventListener('click', () => {
        prevSlide();
        stopAutoAdvance();
        startAutoAdvance();
      });

      document.getElementById('carousel-next').addEventListener('click', () => {
        nextSlide();
        stopAutoAdvance();
        startAutoAdvance();
      });

      // Start auto-advance
      if (carouselPhotos.length > 1) {
        startAutoAdvance();
      }

      // Pause auto-advance on hover
      const carouselContainer = document.querySelector('.carousel-container');
      carouselContainer.addEventListener('mouseenter', stopAutoAdvance);
      carouselContainer.addEventListener('mouseleave', () => {
        if (carouselPhotos.length > 1) startAutoAdvance();
      });
    });

    // Make goToSlide available globally
    window.goToSlide = goToSlide;
  </script>

  <!-- Main Content -->
  <main class="container">
    <!-- Pricing Section -->
    <section id="pricing" class="pricing-section">
      <h2>Simple, Transparent Pricing</h2>
      <div class="pricing-grid">
        <div class="price-card">
          <h3>Single Session</h3>
          <div class="price">$25</div>
          <p>Perfect for trying us out</p>
          <ul>
            <li>20-minute swim time</li>
            <li>Up to 2 dogs per owner</li>
            <li>Private pool access</li>
            <li>Owner supervision required</li>
          </ul>
          <a href="#booking" class="button">Book Now</a>
        </div>

        <div class="price-card">
          <h3>5-Session Package</h3>
          <div class="price">$100</div>
          <p>Save $25 with our package</p>
          <ul>
            <li>Five 20-minute sessions</li>
            <li>Up to 2 dogs per session</li>
            <li>Private pool access</li>
            <li>Flexible scheduling</li>
            <li>$20 per session (save 20%)</li>
          </ul>
          <a href="#booking" class="button">Buy Package</a>
        </div>

        <div class="price-card featured">
          <h3>Dog Swim Club</h3>
          <div class="price">$75<span style="font-size: 1rem;">/mo</span></div>
          <p>Best value for regular swimmers</p>
          <ul>
            <li>4 sessions per month</li>
            <li>Up to 2 dogs per session</li>
            <li>Priority booking access</li>
            <li>Save $25/month vs singles</li>
            <li>Auto-renews monthly</li>
          </ul>
          <a href="#subscription-signup" class="button" onclick="showSubscriptionModal(event)">Join the Club</a>
        </div>

        <div class="price-card">
          <h3>Gift Card</h3>
          <div class="price" style="font-size: 2rem;">Any Amount</div>
          <p>Perfect gift for dog lovers</p>
          <ul>
            <li>Share via email</li>
            <li>Printable with unique ID</li>
            <li>Never expires</li>
            <li>Redeemable for sessions</li>
          </ul>
          <a href="#booking" class="button button-secondary">Buy Gift Card</a>
        </div>
      </div>
    </section>

  <!-- Complete Your Booking - Step-by-Step Process -->
    <section id="booking">
      <h2>Complete Your Booking</h2>
      <p style="text-align: center; font-size: 1.1rem; margin-bottom: 2rem;">Follow these simple steps to book your dog's swimming session</p>
      
    <div class="booking-layout">
        <div class="booking-steps" id="booking-steps">
          <!-- Step 1: Choose Your Sessions -->
          <div class="booking-step expanded" data-step="1">
            <button class="step-header" type="button" aria-expanded="true">
              <span class="step-number">STEP 1</span>
              <div class="step-title">
                <h3>Choose Your Sessions</h3>
                <p class="step-subtitle">View our available time slots below and select the sessions that work best for your schedule.</p>
              </div>
              <span class="step-toggle" aria-hidden="true">
                <span class="chevron"></span>
              </span>
            </button>
            <div class="step-content">
              <p>Each session is 30 minutes. Book early to secure your preferred time.</p>

              <div id="calendar" class="calendar-container" style="margin-top: 1.5rem;">
                <h4>Available Time Slots</h4>
                <p style="font-size: 0.95rem; color: var(--text-light);">Click on any date with available slots to view and select times. Book early to secure your preferred time!</p>
                <div id="calendar-placeholder"></div>
              </div>
            </div>
          </div>

          <!-- Step 2: Provide Your Information -->
          <div class="booking-step" data-step="2">
            <button class="step-header" type="button" aria-expanded="false">
              <span class="step-number">STEP 2</span>
              <div class="step-title">
                <h3>Provide Your Information</h3>
                <p class="step-subtitle">After adding sessions to your cart, fill out your information below to complete your booking.</p>
              </div>
              <span class="step-toggle" aria-hidden="true">
                <span class="chevron"></span>
              </span>
            </button>
            <div class="step-content">
               <div class="info-box" style="margin: 1.25rem 0;">
                <p><strong>Important:</strong> Maximum 2 dogs per session. Owner must be present or provide signed waiver for dog sitter.</p>
              </div>

              <form id="booking-form" class="booking-form">
                <div class="form-group">
                  <label for="firstName">First Name *</label>
                  <input type="text" id="firstName" name="firstName" required />
                </div>

                <div class="form-group">
                  <label for="lastName">Last Name *</label>
                  <input type="text" id="lastName" name="lastName" required />
                </div>

                <div class="form-group">
                  <label for="phone">Phone Number *</label>
                  <input type="tel" id="phone" name="phone" required />
                </div>

                <div class="form-group">
                  <label for="email">Email Address *</label>
                  <input type="email" id="email" name="email" required />
                </div>

                <div class="form-group full-width">
                  <label for="dogNames">Dog Name(s) *</label>
                  <input type="text" id="dogNames" name="dogNames" placeholder="e.g., Buddy, Max" required />
                </div>

                <div class="form-group full-width">
                  <label for="dogBreeds">Breed(s) *</label>
                  <input type="text" id="dogBreeds" name="dogBreeds" placeholder="e.g., Golden Retriever, Labrador" required />
                </div>

                <div class="form-group">
                  <label for="numDogs">Number of Dogs *</label>
                  <select id="numDogs" name="numDogs" required>
                    <option value="">Select...</option>
                    <option value="1">1 Dog</option>
                    <option value="2">2 Dogs</option>
                  </select>
                </div>

                <div class="form-group full-width">
                  <div class="checkbox-group">
                    <input type="checkbox" id="ownershipConfirmed" name="ownershipConfirmed" required />
                    <label for="ownershipConfirmed">I confirm I am the owner of the dog(s) or have authorization from the owner.</label>
                  </div>
                </div>

                <div class="form-group full-width">
                  <div class="checkbox-group">
                    <input type="checkbox" id="waiverAck" name="waiverAck" required />
                    <label for="waiverAck">I have read and agree to the <a href="/waiver/waiver.html" target="_blank">Liability Waiver</a>.</label>
                  </div>
                </div>
              </form>

 <div style="margin-top: 2rem; padding: 1.5rem; background: #f5f5f5; border-radius: 8px; text-align: center;">
                  <p style="margin-bottom: 1rem;"><strong>Or pay directly using Stripe:</strong></p>
                  <div style="display: flex; flex-direction: column; gap: 0.75rem; align-items: center;">
                    <stripe-buy-button
                      id="stripe-buy-button"
                      buy-button-id="buy_btn_1SRg5JAWz02AuqyyQNxXtKgW"
                      publishable-key="pk_live_51Jw6McAWz02Auqyy2ssxTNAhxp3vNGmAfUv4gbUA6NzT8jJb5FefT3lfqObiQwK5ClTRfkzzd3YQaFvZhWIIFsHX00biYat54r"
                    ></stripe-buy-button>
                    <div
                      id="stripe-buy-fallback"
                      style="display: none; width: 100%; text-align: left; background: #fff3cd; border-left: 4px solid #f0ad4e; padding: 1rem; border-radius: 8px;"
                    >
                      <p style="margin: 0 0 0.5rem 0; color: #5c4000;">
                        Stripe checkout is available, but the embedded buy button is blocked because this page cannot use the browser's
                        payment API in the current context. You can still complete your purchase using the secure checkout link below.
                      </p>
                      <a class="button button-secondary" href="https://buy.stripe.com/14AaEW1GV3vIgaK7fE5J60c" style="width: 100%; text-align: center;">
                        Open Stripe Checkout
                      </a>
                    </div>
                  </div>
                </div>
            </div>
          </div>

          <!-- Step 3: Add to Your Calendar -->
          <div class="booking-step" data-step="3">
            <button class="step-header" type="button" aria-expanded="false">
              <span class="step-number">STEP 3</span>
              <div class="step-title">
                <h3>Add to Your Calendar</h3>
                <p class="step-subtitle">Don't forget your session! Download a calendar reminder file after completing your booking.</p>
              </div>
              <span class="step-toggle" aria-hidden="true">
                <span class="chevron"></span>
              </span>
            </button>
            <div class="step-content">
     <div class="calendar-reminder">
                <p class="calendar-description">
                  Finish checkout, then add a reminder so you and your dog arrive on time. Choose the option that works best for your calendar.
                </p>
                <div class="reminder-grid">
                  <div class="reminder-card">
                    <div class="reminder-icon" aria-hidden="true">üì•</div>
                    <div class="reminder-copy">
                      <h4>Download a universal calendar file</h4>
                      <p>Use this .ics file with Apple Calendar, Outlook, Yahoo, and most mobile calendar apps.</p>
                      <div class="reminder-actions">
                        <a href="/assets/session-reminder.ics" download class="button button-secondary reminder-button">üìÖ Download .ics reminder</a>
                        <small>Includes session name, location, and a 30-minute duration by default.</small>
                      </div>
                    </div>
                  </div>

                  <div class="reminder-card">
                    <div class="reminder-icon" aria-hidden="true">üóìÔ∏è</div>
                    <div class="reminder-copy">
                      <h4>Add to Google Calendar</h4>
                      <p>Import the downloaded file to see your swim session on Google Calendar with alerts.</p>
                      <ol class="calendar-instructions">
                        <li>Download the .ics file above.</li>
                        <li>
                          Open <a href="https://calendar.google.com/calendar/u/0/r/settings/export" target="_blank" rel="noopener">Google Calendar's import tool</a> and choose the file.
                        </li>
                        <li>Select your calendar and click <strong>Import</strong> to save the event.</li>
                      </ol>
                    </div>
                  </div>

                   <div class="reminder-card">
                    <div class="reminder-icon" aria-hidden="true">‚è∞</div>
                    <div class="reminder-copy">
                      <h4>Set helpful alerts</h4>
                      <ul class="calendar-reminders">
                        <li>Add a 24-hour reminder to prep towels, leash, and vaccination records.</li>
                        <li>Set a 60-minute alert to account for travel time to the pool.</li>
                        <li>Share the event with anyone joining so everyone arrives together.</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Step 4: Prep Your Visit with Store Picks -->
          <div class="booking-step" data-step="4">
            <button class="step-header" type="button" aria-expanded="false">
              <span class="step-number">STEP 4</span>
              <div class="step-title">
                <h3>Prep Your Visit with Store Picks</h3>
                <p class="step-subtitle">Add popular pool-day essentials now and we'll have them ready when you arrive.</p>
              </div>
              <span class="step-toggle" aria-hidden="true">
                <span class="chevron"></span>
              </span>
            </button>
            <div class="step-content">
              <div class="info-box" style="margin: 1.25rem 0;">
                <p><strong>Arriving prepared means more swim time:</strong> pre-order favorites so we can set them aside at check-in.</p>
              </div>
              <div class="reminder-grid">
                <div class="reminder-card">
                  <div class="reminder-icon" aria-hidden="true">ü¶¥</div>
                  <div class="reminder-copy">
                    <h4>Treats & Hydration</h4>
                    <p>Pick up high-value training treats and spill-proof water bowls to keep pups focused and refreshed.</p>
                  </div>
                </div>
                <div class="reminder-card">
                  <div class="reminder-icon" aria-hidden="true">üõü</div>
                  <div class="reminder-copy">
                    <h4>Safety & Comfort</h4>
                    <p>Reserve life jackets, anti-slip booties, or cooling towels for nervous or senior swimmers.</p>
                  </div>
                </div>
                <div class="reminder-card">
                  <div class="reminder-icon" aria-hidden="true">üéæ</div>
                  <div class="reminder-copy">
                    <h4>Toys for the Pool</h4>
                    <p>Choose floating fetch toys and durable tug gear so playtime starts the moment you arrive.</p>
                  </div>
                </div>
              </div>
              <div style="margin-top: 1.5rem; display: flex; flex-wrap: wrap; gap: 1rem;">
                <a class="button" href="/store" style="flex: 1 1 220px; text-align: center;">Shop & Reserve Items</a>
                <a class="button button-secondary" href="/store/#pickup" style="flex: 1 1 220px; text-align: center;">Request Pickup on Arrival</a>
              </div>
              <p style="margin-top: 1rem; font-size: 0.95rem; color: var(--text-light);">We'll confirm your selections with your booking so everything is ready at check-in.</p>
            </div>
          </div>
          <!-- Step 5: Download Rules -->
          <div class="booking-step" data-step="5">
            <button class="step-header" type="button" aria-expanded="false">
              <span class="step-number">STEP 5</span>
              <div class="step-title">
                <h3>Review the Pool Rules</h3>
                <p class="step-subtitle">Read our safety and etiquette guidelines before you arrive.</p>
              </div>
              <span class="step-toggle" aria-hidden="true">
                <span class="chevron"></span>
              </span>
            </button>
            <div class="step-content">
              <div id="rules-content" class="rules-content">
                <h3 style="color: var(--secondary);">Pool Safety Basics</h3>
                <ul style="line-height: 1.8; margin: 1rem 0 2rem 1.5rem;">
                  <li>No lifeguard on duty‚Äîan adult must stay within arm's reach of swimming dogs.</li>
                  <li>Only booked dogs are allowed in the pool area; keep other pets at home.</li>
                  <li>Secure dogs on a leash until they enter the pool and when they exit the water.</li>
                  <li>Remove prong collars, choke chains, and harnesses before dogs enter the pool.</li>
                  <li>Report any accidents or facility damage immediately so we can sanitize the area.</li>
                </ul>

                <h3 style="color: var(--secondary);">Health & Cleanliness</h3>
                <ul style="line-height: 1.8; margin: 1rem 0 2rem 1.5rem;">
                  <li>Dogs must be free of fleas, ticks, and contagious illnesses.</li>
                  <li>Rinse dogs before swimming if they recently visited the beach to reduce sand in the pool.</li>
                  <li>Do not allow dogs to drink pool water; bring fresh water for breaks.</li>
                  <li>If your dog defecates, clear the area and notify staff so disinfecting can occur.</li>
                </ul>

                <h3 style="color: var(--secondary);">Owner Responsibilities</h3>
                <ul style="line-height: 1.8; margin: 1rem 0 2rem 1.5rem;">
                  <li>Provide proof of current vaccinations upon request.</li>
                  <li>Disclose any known health conditions, behavioral issues, or physical limitations.</li>
                  <li>Supervise dogs at all times during the session.</li>
                  <li>Bring necessary items (towels, leash, etc.).</li>
                  <li>Arrive on time for scheduled sessions.</li>
                  <li>Provide 24-hour notice for cancellations.</li>
                  <li>Our goal is low stress for your pups, so please wait until the previous pets are in their vehicle.</li>
                  
                </ul>

                <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; border-radius: 8px; margin-top: 2rem;">
                  <p style="margin: 0;"><strong>‚ö†Ô∏è Important:</strong> Violation of these rules may result in immediate termination of services without refund. By using our facility, you acknowledge that you have read, understood, and agree to follow all rules and guidelines.</p>
                </div>
              </div>

              <div style="padding: 2rem; border-top: 2px solid var(--border); background: #f9f9f9; border-radius: 0 0 12px 12px;">
                <button onclick="downloadRulesPDF()" class="button button-secondary" style="width: 100%;">üìÑ Download Rules as PDF</button>
          </div>
        </div>
      </div>
                <div class="booking-cta" id="checkout-cta">
        <div class="cta-copy">
          <h3>Ready to complete your booking?</h3>
          <p>Review your cart, confirm your details, and finish checkout securely with Stripe.</p>
        </div>
        <div class="cta-actions">
          <button type="submit" form="booking-form" class="button">Complete Booking &amp; Pay with Stripe</button>
        </div>
      </div>
          
      <footer>
        <p>¬© 2025 DoggyPaddle. A MustWants Inc service in St. Augustine, FL.</p>
        <p>Questions? Email <a href="mailto:info@doggypaddle.com">info@doggypaddle.com</a>.</p>
        <p><a href="#pricing">Book a Swim</a> ¬∑ <a href="/store">Shop Treats &amp; Toys</a> ¬∑ <a href="/waiver/waiver.html">View Waiver</a> ¬∑ <a href="/photos">Share Photos</a></p>
              <div class="footer-actions">
          <a class="footer-admin-button" href="/admin">Admin Login</a>
        </div>
      </footer>

  <!-- Scripts -->
  <script
    src="/scripts/config.js"
   integrity="sha384-rYcDxI6bWoOeERV7OP7Ymh2td09PRer0ZAWHvSjmDnwn+I3LMykBPrUaAbJiXlzN"
    crossorigin="anonymous"
  ></script>
  <script>
    (function initializeStripeBuyButton() {
      const buyButton = document.getElementById('stripe-buy-button');
      const fallbackNotice = document.getElementById('stripe-buy-fallback');
      const isSecure = window.isSecureContext || ['localhost', '127.0.0.1'].includes(window.location.hostname);
      const stripeFrameAllowValue = "payment 'self' https://js.stripe.com https://buy.stripe.com";

      function getPaymentPermission() {
        const policy = document.permissionsPolicy || document.featurePolicy;
        if (!policy) {
          return { allowed: isSecure, reason: 'policy-api-unavailable' };
        }

        if (typeof policy.allowsFeature === 'function') {
          try {
            return { allowed: policy.allowsFeature('payment'), reason: 'allowsFeature' };
          } catch (error) {
            console.warn('Unable to evaluate permissions policy for payment feature:', error);
            return { allowed: false, reason: 'allowsFeature-error' };
          }
        }

        if (typeof policy.allowedFeatures === 'function') {
          try {
            const features = policy.allowedFeatures();
            return {
              allowed: Array.isArray(features) ? features.includes('payment') : isSecure,
              reason: 'allowedFeatures'
            };
          } catch (error) {
            console.warn('Unable to read allowed features from permissions policy:', error);
            return { allowed: false, reason: 'allowedFeatures-error' };
          }
        }

        return { allowed: isSecure, reason: 'policy-api-unknown' };
      }

      if (!buyButton) {
        return;
      }

      const paymentPermission = getPaymentPermission();
      const paymentFeatureAllowed = isSecure && paymentPermission.allowed;

      function enforceStripeIframePermissions() {
        const applyAllowValue = (iframe) => {
          if (!iframe || !iframe.src || !iframe.src.includes('stripe.com')) return;

          const currentAllow = iframe.getAttribute('allow') || '';
          if (!currentAllow.includes('payment')) {
            iframe.setAttribute('allow', stripeFrameAllowValue);
          }
        };

        document.querySelectorAll('iframe[src*="stripe.com"]').forEach(applyAllowValue);

        const observer = new MutationObserver((mutations) => {
          mutations.forEach(({ addedNodes }) => {
            addedNodes.forEach((node) => {
              if (node.tagName === 'IFRAME') {
                applyAllowValue(node);
                return;
              }

              if (node.querySelectorAll) {
                node.querySelectorAll('iframe').forEach(applyAllowValue);
              }
            });
          });
        });

        observer.observe(document.body, { childList: true, subtree: true });
      }

      if (isSecure && paymentFeatureAllowed) {
        const stripeScript = document.createElement('script');
        stripeScript.src = 'https://js.stripe.com/v3/buy-button.js';
        stripeScript.async = true;
        stripeScript.onload = () => {
          enforceStripeIframePermissions();
          console.info('Stripe buy button initialized without permissions policy violations.');
        };
        stripeScript.onerror = () => {
          console.error('Stripe buy button script failed to load.');
          buyButton.style.display = 'none';
          if (fallbackNotice) {
            fallbackNotice.style.display = 'block';
          }
        };
        document.body.appendChild(stripeScript);
      } else {
        const warningReason = !isSecure
          ? 'Payment APIs require a secure context (HTTPS or localhost).'
          : 'Permissions policy for payment is blocking embedded checkout.';

        console.warn('Stripe buy button skipped because payment APIs are blocked or the page is not served from a secure context.', paymentPermission.reason);
        buyButton.style.display = 'none';
        if (fallbackNotice) {
          fallbackNotice.style.display = 'block';
          fallbackNotice.setAttribute('data-permission-reason', warningReason);
        }
      }
    })();
  </script>
  <script
    src="/scripts/booking.js"
    integrity="sha384-i9x4B6rfvmfl6A5YUbcOohivpRxkb8Y+OO/94h6jnyAbWQMSKFY69YAfx1gOsU8s"
    crossorigin="anonymous"
  ></script>
  <script
    src="/scripts/calendar.js"
    integrity="sha384-pNJeT57fMQgdfQqdUDN4WMrPr2SeB1blyWWS4mclup3xNflqyBtv7PI5sw5zQdRo"
    crossorigin="anonymous"
  ></script>
            <script src="/scripts/header-cart.js"></script>
  <script>
    // Subscription modal handler
    function showSubscriptionModal(event) {
      event.preventDefault();
      window.location.href = '/subscription.html';
    }

    // Rules modal handlers
    function openRulesModal() {
      document.getElementById('rules-modal').style.display = 'block';
      document.body.style.overflow = 'hidden';
    }

    function closeRulesModal() {
      document.getElementById('rules-modal').style.display = 'none';
      document.body.style.overflow = '';
    }

    function downloadRulesPDF() {
      const rulesContent = document.getElementById('rules-content');

           if (!rulesContent) {
        console.error('Rules content not found on the page.');
        alert('We could not load the rules. Please refresh and try again.');
        return;
      }

      const printWindow = window.open('', '_blank');

      if (!printWindow) {
        alert('Please allow pop-ups to download the rules.');
        return;
      }
      
      printWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>DoggyPaddle Facility Rules</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              max-width: 800px;
              margin: 40px auto;
              padding: 20px;
              line-height: 1.6;
            }
            h1, h2, h3 { color: #114B5F; }
            h1 {
              text-align: center;
              border-bottom: 3px solid #028090;
              padding-bottom: 10px;
              margin-bottom: 30px;
            }
            .header {
              text-align: center;
              margin-bottom: 30px;
            }
            h3 {
              color: #028090;
              margin-top: 25px;
              border-bottom: 2px solid #e0e0e0;
              padding-bottom: 8px;
            }
            ul, ol {
              margin: 15px 0 20px 30px;
            }
            li {
              margin: 8px 0;
            }
            .important-box {
              background: #fff3cd;
              border-left: 4px solid #ffc107;
              padding: 15px;
              margin: 25px 0;
              border-radius: 4px;
            }
            @media print {
              button { display: none; }
              body { margin: 20px; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>üêï DoggyPaddle Facility Rules & Safety Guidelines</h1>
            <p><strong>A MustWants Inc Service</strong></p>
            <p>St. Augustine, St. Johns County, Florida</p>
            <p style="font-size: 0.9rem; color: #666;">Effective: ${new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
          </div>

          ${rulesContent.innerHTML}

          <div style="margin-top: 40px; padding-top: 20px; border-top: 2px solid #e0e0e0; text-align: center; color: #666;">
            <p>For questions or concerns, contact us at info@doggypaddle.com</p>
            <p>&copy; ${new Date().getFullYear()} MustWants Inc. All rights reserved.</p>
          </div>

          <div style="margin-top: 20px; text-align: center;">
            <button onclick="window.print()" style="padding: 10px 30px; font-size: 16px; background: #028090; color: white; border: none; border-radius: 5px; cursor: pointer;">
              Print / Save as PDF
            </button>
            <button onclick="window.close()" style="padding: 10px 30px; font-size: 16px; background: #666; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">
              Close
            </button>
          </div>
        </body>
        </html>
      `);

      printWindow.document.close();
            printWindow.focus();
    }

    // Close modal on escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        const rulesModal = document.getElementById('rules-modal');
        if (rulesModal && rulesModal.style.display === 'block') {
          closeRulesModal();
        }
      }
    });

    // Close modal on outside click
    document.getElementById('rules-modal')?.addEventListener('click', function(e) {
      if (e.target === this) {
        closeRulesModal();
      }
    });
  </script>
</body>
</html>
